<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta name="baidu-site-verification" content="MEb1AH2Era">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="欢迎来到马运锋的博客">
<meta name="keywords" content="博客|马运锋|mayunf|mayun|马云">
<meta property="og:type" content="website">
<meta property="og:title" content="马运锋的博客">
<meta property="og:url" content="http://blog.mayunfeng.com/page/3/index.html">
<meta property="og:site_name" content="马运锋的博客">
<meta property="og:description" content="欢迎来到马运锋的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="马运锋的博客">
<meta name="twitter:description" content="欢迎来到马运锋的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.mayunfeng.com/page/3/">





  <title>马运锋的博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b8dc202e320f61375186f03afeb98a68";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">马运锋的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">欢迎来到马运锋的博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/12/03/laravel-1071/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/03/laravel-1071/" itemprop="url">Specified key was too long; max key length is 1000 bytes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-03T17:25:55+08:00">
                2018-12-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="错误原因"><a href="#错误原因" class="headerlink" title="错误原因"></a>错误原因</h2><p>Laravel 5.4 以后 默认使用 <code>utf8mb4</code> 字符编码，而不是之前的utf8编码。因此运行 <code>php artisan migrate</code> 会出现如下错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ php artisan migrate</span><br><span class="line">Migration table created successfully.</span><br><span class="line"></span><br><span class="line">In Connection.php line 664:</span><br><span class="line"></span><br><span class="line">  SQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was t</span><br><span class="line">  oo long; max key length is 1000 bytes (SQL: alter table `m_users` add uniqu</span><br><span class="line">  e `users_email_unique`(`email`))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">In Connection.php line 458:</span><br><span class="line"></span><br><span class="line">  SQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was t</span><br><span class="line">  oo long; max key length is 1000 bytes</span><br></pre></td></tr></table></figure>
<p>MySql支持的utf8编码最大字符长度为3字节，如果遇到4字节的宽字符就会出现插入异常。三个字节UTF-8最大能编码的Unicode字符是0xffff，即Unicode中的基本多文种平面（BMP）。因而包括Emoji表情（Emoji是一种特殊的Unicode编码）在内的非基本多文种平面的Unicode字符都无法使用MySql的utf8字符集存储。</p>
<p>这也应该就是Laravel 5.4改用4字节长度的utf8mb4字符编码的原因之一。不过要注意的是，只有MySql 5.5.3版本以后才开始支持utf8mb4字符编码（查看版本：selection version();）。</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><ol>
<li><p>升级MySql版本到5.5.3以上。</p>
</li>
<li><p>手动配置迁移命令migrate生成的默认字符串长度，在AppServiceProvider中调用Schema::defaultStringLength方法来实现配置：</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">namespace App\Providers;</span><br><span class="line"></span><br><span class="line">use Illuminate\Support\ServiceProvider;</span><br><span class="line">use Illuminate\Support\Facades\Schema;</span><br><span class="line"></span><br><span class="line">class AppServiceProvider extends ServiceProvider</span><br><span class="line">&#123;</span><br><span class="line">    /**</span><br><span class="line">     * Bootstrap any application services.</span><br><span class="line">     *</span><br><span class="line">     * @<span class="built_in">return</span> void</span><br><span class="line">     */</span><br><span class="line">    public <span class="keyword">function</span> boot()</span><br><span class="line">    &#123;</span><br><span class="line">        //</span><br><span class="line">        Schema::defaultStringLength(191);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Register any application services.</span><br><span class="line">     *</span><br><span class="line">     * @<span class="built_in">return</span> void</span><br><span class="line">     */</span><br><span class="line">    public <span class="keyword">function</span> register()</span><br><span class="line">    &#123;</span><br><span class="line">        //</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/12/01/composer-vendor-not-add-git/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/01/composer-vendor-not-add-git/" itemprop="url">vendor/mayunfeng/* 目录无法提交到git上</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-01T12:35:06+08:00">
                2018-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p><code>composer</code> 安装扩展时使用了 <code>dev-master</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require mayunfeng/yii2-aliyunoss:dev-master</span><br></pre></td></tr></table></figure>
<h2 id="避免办法"><a href="#避免办法" class="headerlink" title="避免办法"></a>避免办法</h2><p>使用 <code>--prefer-dist</code> 或设置 <code>preferred-install</code> 为 <code>dist</code> 到项目的 <code>config</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require --prefer-dist mayunfeng/yii2-aliyunoss:dev-master</span><br></pre></td></tr></table></figure>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><h3 id="删除git-cache"><a href="#删除git-cache" class="headerlink" title="删除git cache"></a>删除git cache</h3><blockquote>
<p>执行前需要删除扩展包文件夹下的 <code>.git</code> 文件夹</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached vendor/mayunfeng/*</span><br><span class="line"></span><br><span class="line">rm <span class="string">'vendor/mayunfeng/insideapi/.gitignore'</span></span><br><span class="line">rm <span class="string">'vendor/mayunfeng/insideapi/README.md'</span></span><br><span class="line">rm <span class="string">'vendor/mayunfeng/insideapi/composer.json'</span></span><br><span class="line">rm <span class="string">'vendor/mayunfeng/insideapi/phpunit.xml'</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h3 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line"></span><br><span class="line">On branch dev</span><br><span class="line">Your branch is up to date with <span class="string">'origin/dev'</span>.</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        deleted:    vendor/mayunfeng/insideapi/.gitignore</span><br><span class="line">        deleted:    vendor/mayunfeng/insideapi/README.md</span><br><span class="line">        ......</span><br></pre></td></tr></table></figure>
<h3 id="重新添加"><a href="#重新添加" class="headerlink" title="重新添加"></a>重新添加</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git add . &amp;&amp; git commit -m 添加扩展包</span><br><span class="line"></span><br><span class="line">[dev fd7b4f8] 添加扩展包</span><br><span class="line"> 330 files changed, 130652 insertions(+), 11 deletions(-)</span><br><span class="line"> delete mode 160000 vendor/mayunfeng/yii2-aliyunoss</span><br><span class="line"> create mode 100644 vendor/mayunfeng/yii2-aliyunoss/.gitignore</span><br><span class="line"> create mode 100644 vendor/mayunfeng/yii2-aliyunoss/LICENSE</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>
<h3 id="再次提交"><a href="#再次提交" class="headerlink" title="再次提交"></a>再次提交</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br><span class="line"></span><br><span class="line">Counting objects: 336, <span class="keyword">done</span>.</span><br><span class="line">Delta compression using up to 8 threads.</span><br><span class="line">Compressing objects: 100% (300/300), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (336/336), 2.61 MiB | 6.42 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Total 336 (delta 36), reused 229 (delta 23)</span><br><span class="line">remote: Resolving deltas: 100% (36/36), completed with 6 <span class="built_in">local</span> objects.</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>参考文章：</p>
<p><a href="https://laravel-china.org/docs/composer/2018/should-i-commit-the-dependencies-in-my-vendor-directory/2102" target="_blank" rel="noopener">https://laravel-china.org/docs/composer/2018/should-i-commit-the-dependencies-in-my-vendor-directory/2102</a><br><a href="https://blog.csdn.net/p763833631/article/details/79990489" target="_blank" rel="noopener">https://blog.csdn.net/p763833631/article/details/79990489</a><br><a href="https://blog.csdn.net/xiaotuni/article/details/77885140" target="_blank" rel="noopener">https://blog.csdn.net/xiaotuni/article/details/77885140</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/11/26/composer-use-private-package/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/26/composer-use-private-package/" itemprop="url">使用自有托管 Gitlab 上的私有包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-26T17:11:04+08:00">
                2018-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="使用自有托管-Gitlab-上的私有包"><a href="#使用自有托管-Gitlab-上的私有包" class="headerlink" title="使用自有托管 Gitlab 上的私有包"></a>使用自有托管 Gitlab 上的私有包</h2><p>推荐使用 vcs 作为版本库类型，并且 Composer 决定获取包的合适的方法。比如，从Github上添加一个 fork，使用它的 API 下载整个版本库的 .zip 文件，而不用克隆。</p>
<p>不过对一个私有的 Gitlab 安装来讲会更复杂。如果用 vcs 作版本库类型，Composer 会检测到它是个 Gitlab 类型的安装，会尝试使用 API 下载包（这要求有 API key。我不想设置，所以我只用 SSH 克隆安装了) ：</p>
<p>首先指明版本库类型是 git：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"repositories"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"type"</span>: <span class="string">"git"</span>,</span><br><span class="line">        <span class="string">"url"</span>: <span class="string">"git@gitlab.mycompany.cz:package-namespace/package-name.git"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>然后指明常用的包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"require"</span>: &#123;</span><br><span class="line">    <span class="string">"package-namespace/package-name"</span>: <span class="string">"1.0.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="临时使用-fork-下-bug-修复分支的方法"><a href="#临时使用-fork-下-bug-修复分支的方法" class="headerlink" title="临时使用 fork 下 bug 修复分支的方法"></a>临时使用 fork 下 bug 修复分支的方法</h2><p>如果在某个公共的库中找到一个 bug，并且在Github上自己的 fork 中修复了它， 这就需要从自己的版本库里安装这个库，而不是官方版本库（要到修复合并且修复的版本释出才行）。</p>
<p>使用 <a href="https://getcomposer.org/doc/articles/aliases.md#require-inline-alias" target="_blank" rel="noopener">内嵌别名</a> 可轻松搞定：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"repositories"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"vcs"</span>,</span><br><span class="line">            <span class="string">"url"</span>: <span class="string">"https://github.com/you/monolog"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"require"</span>: &#123;</span><br><span class="line">        <span class="string">"symfony/monolog-bundle"</span>: <span class="string">"2.0"</span>,</span><br><span class="line">        <span class="string">"monolog/monolog"</span>: <span class="string">"dev-bugfix as 1.0.x-dev"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以通过 <a href="https://getcomposer.org/doc/05-repositories.md#path" target="_blank" rel="noopener">设置 <code>path</code> 作为版本库类型</a> 在本地测试这次修复，然后再 push 更新版本库。</p>
<p>参考文档：</p>
<p><a href="https://laravel-china.org/topics/7609/you-have-to-know-17-composer-best-practices-updated-to-22" target="_blank" rel="noopener">你必须知道的 17 个 Composer 最佳实践（已更新至 22 个）</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/11/26/redis-mul-del-keys/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/26/redis-mul-del-keys/" itemprop="url">Redis将key分组，删除匹配通配符的key</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-26T16:26:16+08:00">
                2018-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="如何将key分组"><a href="#如何将key分组" class="headerlink" title="如何将key分组"></a>如何将key分组</h2><blockquote>
<p>使用冒号（:）分组或者其他的自定义前缀方式，如果我们需要清除redis特定的key内容时，在命令行下又没有直接的命令可用，可以使用linux的xargs参数或者第三方工具</p>
</blockquote>
<h2 id="命令行批量删除redis的key"><a href="#命令行批量删除redis的key" class="headerlink" title="命令行批量删除redis的key"></a>命令行批量删除redis的key</h2><blockquote>
<p>首先linux服务器上需要安装redis客户端，然后进入到redis-cli命令所在的目录</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 127.0.0.1 -p 6379 -a 123456  keys <span class="string">'test*'</span> | xargs  redis-cli -h 127.0.0.1 -p 6379 -a 123456 del</span><br></pre></td></tr></table></figure>
<ul>
<li>h redis 的ip地址</li>
<li>p redis 的端口</li>
<li>keys 通配符</li>
<li>a redis 密码</li>
</ul>
<p>参考文档：<a href="https://www.jianshu.com/p/b3b6f3146325" target="_blank" rel="noopener">https://www.jianshu.com/p/b3b6f3146325</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/11/22/net-ERR-INCOMPLETE-CHUNKED-ENCODING-200/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/22/net-ERR-INCOMPLETE-CHUNKED-ENCODING-200/" itemprop="url">异常记录：ajax请求失败 chrome报错net::ERR_INCOMPLETE_CHUNKED_ENCODING</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-22T09:41:41+08:00">
                2018-11-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>记一次解决chrome报错net::ERR_INCOMPLETE_CHUNKED_ENCODING</p>
<h2 id="先给出解决办法："><a href="#先给出解决办法：" class="headerlink" title="先给出解决办法："></a>先给出解决办法：</h2><p>调整/fastcgi_temp权限为配置nginx的那个用户。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R webapps:webapps /usr/<span class="built_in">local</span>/nginx/fastcgi_temp</span><br></pre></td></tr></table></figure>
<h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><p>因为之前请求时正常的，中间改过一次服务端的 nginx 启用用户。直接查看了网站的nginx访问日志。</p>
<p>发现了下面的错误：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018/11/22 09:28:14 [crit] 41558<span class="comment">#0: *57127 open() "/usr/local/nginx/fastcgi_temp/2/23/0000000232" failed (13: Permission denied) while reading upstream, client: 10.110.30.108, server: www.zentao.test, request: "GET /index.php?m=my&amp;f=index HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "www.zentao.test"</span></span><br></pre></td></tr></table></figure></p>
<p>/usr/local/nginx/fastcgi_temp</p>
<h2 id="拓展：fastcgi-temp-目录的作用"><a href="#拓展：fastcgi-temp-目录的作用" class="headerlink" title="拓展：fastcgi_temp 目录的作用"></a>拓展：fastcgi_temp 目录的作用</h2><p>先简单的说一下 Nginx 的 buffer 机制，对于来自 FastCGI Server 的 Response，Nginx 将其缓冲到内存中，然后依次发送到客户端浏览器。缓冲区的大小由 fastcgi_buffers 和 fastcgi_buffer_size 两个值控制。<br>比如如下配置：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fastcgi_buffers      8 4K;</span><br><span class="line">fastcgi_buffer_size  4K;</span><br></pre></td></tr></table></figure></p>
<p>fastcgi_buffers 控制 nginx 最多创建 8 个大小为 4K 的缓冲区，而 fastcgi_buffer_size 则是处理 Response 时第一个缓冲区的大小，不包含在前者中。所以总计能创建的最大内存缓冲区大小是 8<em>4K+4K = 36k。而这些缓冲区是根据实际的 Response 大小动态生成的，并不是一次性创建的。比如一个 8K 的页面，Nginx 会创建 2</em>4K 共 2 个 buffers。</p>
<p>当 Response 小于等于 36k 时，所有数据当然全部在内存中处理。如果 Response 大于 36k 呢？fastcgi_temp 的作用就在于此。多出来的数据会被临时写入到文件中，放在这个目录下面。同时你会在 error.log 中看到一条类似 warning：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2010/03/13 03:42:22 [warn] 3994<span class="comment">#0: *1 an upstream response is buffered to a temporary file</span></span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/fastcgi_temp/1/00/0000000001 <span class="keyword">while</span> reading upstream, </span><br><span class="line">client: 192.168.2.1,</span><br><span class="line">server: pma.verdana.cn,</span><br><span class="line">request: <span class="string">"POST /tbl_structure.php HTTP/1.1"</span>,</span><br><span class="line">upstream: <span class="string">"fastcgi://127.0.0.1:9000"</span>, </span><br><span class="line">host: <span class="string">"pma.verdana.cn"</span>,</span><br><span class="line">referrer: <span class="string">"http://pma.verdana.cn/tbl_structure.php"</span></span><br></pre></td></tr></table></figure>
<p>显然，缓冲区设置的太小的话，Nginx 会频繁读写硬盘，对性能有很大的影响，但也不是越大越好，没意义，呵呵！</p>
<p>当代理文件大小超过配置的proxy_temp_file_write_size值时，nginx会将文件写入到临时目录下（默认为/proxy_temp）。</p>
<p>如果nginx对/proxy_temp没有权限，就写不进去。</p>
<p>参考资料：</p>
<p><a href="https://blog.csdn.net/u012383839/article/details/72875199" target="_blank" rel="noopener">https://blog.csdn.net/u012383839/article/details/72875199</a><br><a href="https://blog.csdn.net/crx05/article/details/70210323" target="_blank" rel="noopener">https://blog.csdn.net/crx05/article/details/70210323</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/11/20/learn-docker/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/20/learn-docker/" itemprop="url">learn-docker</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-20T20:54:37+08:00">
                2018-11-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>记录docker学习内容</p>
<h2 id="docker-常用命令"><a href="#docker-常用命令" class="headerlink" title="docker 常用命令"></a>docker 常用命令</h2><ol>
<li><p>看所有镜像的列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用阿里云docker镜像加速</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://85uexsvl.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<p>参考资料<a href="https://yq.aliyun.com/articles/29941" target="_blank" rel="noopener">https://yq.aliyun.com/articles/29941</a></p>
<ol start="3">
<li>docker 常用子命令</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">images    显示镜像列表</span><br><span class="line"></span><br><span class="line"><span class="built_in">history</span>   显示镜像构建历史</span><br><span class="line"></span><br><span class="line">commit    从容器创建新镜像</span><br><span class="line"></span><br><span class="line">build     从 Dockerfile 构建镜像</span><br><span class="line"></span><br><span class="line">tag       给镜像打 tag</span><br><span class="line"></span><br><span class="line">pull      从 registry 下载镜像</span><br><span class="line"></span><br><span class="line">push      将 镜像 上传到 registry</span><br><span class="line"></span><br><span class="line">rmi       删除 Docker host 中的镜像</span><br><span class="line"></span><br><span class="line">search    搜索 Docker Hub 中的镜像</span><br><span class="line"></span><br><span class="line">ps        查看当前运行的容器</span><br><span class="line"></span><br><span class="line">stop <span class="variable">$id</span>  停止运行某个容器</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/11/20/learn-ubuntu/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/20/learn-ubuntu/" itemprop="url">learn-ubuntu</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-20T20:02:14+08:00">
                2018-11-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>本文主要记录一下在使用ubuntu系统时遇到的一些问题，以及解决方法。用作备份</p>
</blockquote>
<h2 id="root用户默认的初始密码"><a href="#root用户默认的初始密码" class="headerlink" title="root用户默认的初始密码"></a>root用户默认的初始密码</h2><p>ubuntu安装好后，root初始密码（默认密码）不知道，需要设置。</p>
<ol>
<li><p>先用安装时候的用户登录进入系统</p>
</li>
<li><p>输入：<code>sudo passwd</code>  按回车</p>
</li>
<li><p>输入新密码，重复输入密码，最后提示passwd：password updated sucessfully<br> 此时已完成root密码的设置</p>
</li>
<li><p>输入：<code>su root</code></p>
</li>
</ol>
<p>切换用户到root试试…….</p>
<p>参考文档：<a href="https://www.cnblogs.com/yuejin/p/3645294.html" target="_blank" rel="noopener">https://www.cnblogs.com/yuejin/p/3645294.html</a></p>
<h2 id="“Unable-to-locate-package”-while-trying-to-install-packages-with-APT"><a href="#“Unable-to-locate-package”-while-trying-to-install-packages-with-APT" class="headerlink" title="“Unable to locate package” while trying to install packages with APT"></a>“Unable to locate package” while trying to install packages with APT</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install &lt;package&gt;</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">E: Unable to locate package &lt;package&gt;</span><br></pre></td></tr></table></figure>
<p>解决办法：</p>
<ol>
<li><p>激活仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository main</span><br><span class="line">sudo add-apt-repository universe</span><br><span class="line">sudo add-apt-repository restricted</span><br><span class="line">sudo add-apt-repository multiverse</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>安装</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install &lt;package&gt;</span><br></pre></td></tr></table></figure>
<p><a href="https://askubuntu.com/questions/378558/unable-to-locate-package-while-trying-to-install-packages-with-apt/481355#481355?newreg=5620a7bb97d742dbb22cbcd1837a0734" target="_blank" rel="noopener">参考文档</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/11/15/laravel-seeder-class-not-exist/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/15/laravel-seeder-class-not-exist/" itemprop="url">Laravel执行seeder命令出现class *** does not exist</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-15T11:20:43+08:00">
                2018-11-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天执行完  <code>php artisan db:seed</code> 发现出现以下错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Seeding: UserSeeder</span><br><span class="line">Seeding: InitDataSeeder</span><br><span class="line"></span><br><span class="line">In Container.php line 752:</span><br><span class="line"></span><br><span class="line">  Class InitDataSeeder does not exist</span><br></pre></td></tr></table></figure>
<p>查阅文档<a href="https://laravel-china.org/docs/laravel/5.5/seeding/1330#24bd5e" target="_blank" rel="noopener">Laravel 数据库之：数据填充</a></p>
<p>发现，完成 seeder 类的编写之后，你可能需要使用 dump-autoload 命令重新生成 Composer 的自动加载器：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer dump-autoload</span><br></pre></td></tr></table></figure>
<p>接着就可以使用 Artisan 命令 <code>db:seed</code> 来填充数据库了。<br>默认情况下，<code>db:seed</code> 命令将运行 DatabaseSeeder 类，这个类可以用来调用其它 Seed 类。<br>不过，你也可以使用 –class 选项来指定一个特定的 seeder 类：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php artisan db:seed</span><br><span class="line"></span><br><span class="line">php artisan db:seed --class=UsersTableSeeder</span><br></pre></td></tr></table></figure>
<p>你也可以使用 <code>migrate:refresh</code> 命令来填充数据库，该命令会回滚并重新运行所有迁移。这个命令可以用来重建数据库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan migrate:refresh --seed</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/11/13/change-git-remote/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/13/change-git-remote/" itemprop="url">change-git-remote</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-13T09:12:28+08:00">
                2018-11-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>更换git远程仓库地址(以下命令建议在git bash 下执行)：</p>
<p><strong>注意：下列命令中的<code>mina.api.jwsem.cn</code> 需要替换为自己的仓库地址名称</strong></p>
<h2 id="首先执行-git-remote-v-查看当前仓库地址，结果如下"><a href="#首先执行-git-remote-v-查看当前仓库地址，结果如下" class="headerlink" title="首先执行 git remote -v 查看当前仓库地址，结果如下"></a>首先执行 <code>git remote -v</code> 查看当前仓库地址，结果如下</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">D:\phpStudy\PHPTutorial\WWW\mina.api.jwsem.cn&gt;git remote -v</span><br><span class="line"></span><br><span class="line">origin  ssh://webapps@10.110.30.49/~/git/mina.api.jwsem.cn (fetch)</span><br><span class="line">origin  ssh://webapps@10.110.30.49/~/git/mina.api.jwsem.cn (push)</span><br></pre></td></tr></table></figure>
<h2 id="复制-ssh-webapps-10-110-30-49-git-mina-api-jwsem-cn-将地址改为-ssh-webapps-10-110-30-73-git-mina-api-jwsem-cn"><a href="#复制-ssh-webapps-10-110-30-49-git-mina-api-jwsem-cn-将地址改为-ssh-webapps-10-110-30-73-git-mina-api-jwsem-cn" class="headerlink" title="复制 ssh://webapps@10.110.30.49/~/git/mina.api.jwsem.cn 将地址改为 ssh://webapps@10.110.30.73/~/git/mina.api.jwsem.cn"></a>复制 <code>ssh://webapps@10.110.30.49/~/git/mina.api.jwsem.cn</code> 将地址改为 <code>ssh://webapps@10.110.30.73/~/git/mina.api.jwsem.cn</code></h2><p>即：地址中的49改为73,<code>mina.api.jwsem.cn</code> 需要替换为自己的仓库地址名称执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="built_in">set</span>-url origin ssh://webapps@10.110.30.73/~/git/mina.api.jwsem.cn</span><br></pre></td></tr></table></figure>
<p>如果没有报错信息即修改成功了。</p>
<h2 id="再次执行-git-remote-v-查看当前仓库地址，结果如下"><a href="#再次执行-git-remote-v-查看当前仓库地址，结果如下" class="headerlink" title="再次执行 git remote -v 查看当前仓库地址，结果如下"></a>再次执行 <code>git remote -v</code> 查看当前仓库地址，结果如下</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">D:\phpStudy\PHPTutorial\WWW\mina.api.jwsem.cn&gt;git remote -v</span><br><span class="line"></span><br><span class="line">origin  ssh://webapps@10.110.30.73/~/git/mina.api.jwsem.cn (fetch)</span><br><span class="line">origin  ssh://webapps@10.110.30.73/~/git/mina.api.jwsem.cn (push)</span><br></pre></td></tr></table></figure>
<h2 id="此时执行-git-pull-第一次会出现以下错误"><a href="#此时执行-git-pull-第一次会出现以下错误" class="headerlink" title="此时执行 git pull 第一次会出现以下错误"></a>此时执行 <code>git pull</code> 第一次会出现以下错误</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span><br><span class="line">Someone could be eavesdropping on you right now (man-in-the-middle attack)!</span><br><span class="line">It is also possible that a host key has just been changed.</span><br><span class="line">The fingerprint <span class="keyword">for</span> the RSA key sent by the remote host is</span><br><span class="line">SHA256:buhkV/c/OVY1lOGF+pKRo/hpDhw7YZ+Yj9o+Qx8bib4.</span><br><span class="line">Please contact your system administrator.</span><br><span class="line">Add correct host key <span class="keyword">in</span> /c/Users/mayunfeng/.ssh/known_hosts to get rid of this message.</span><br><span class="line">Offending RSA key <span class="keyword">in</span> /c/Users/mayunfeng/.ssh/known_hosts:3</span><br><span class="line">RSA host key <span class="keyword">for</span> 10.110.30.73 has changed and you have requested strict checking.</span><br><span class="line">Host key verification failed.</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure>
<p>解决方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -R 10.110.30.73</span><br></pre></td></tr></table></figure></p>
<p>得到以下结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -R 10.110.30.73</span><br><span class="line"><span class="comment"># Host 10.110.30.73 found: line 3</span></span><br><span class="line">/c/Users/mayunfeng/.ssh/known_hosts updated.</span><br><span class="line">Original contents retained as /c/Users/mayunfeng/.ssh/known_hosts.old</span><br></pre></td></tr></table></figure>
<p>再次执行 <code>git pull</code> 问题得到解决！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.mayunfeng.com/2018/11/12/host-key-for-ip-address-has-changed-and-you-have-requested-strict-checking/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马运锋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马运锋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/12/host-key-for-ip-address-has-changed-and-you-have-requested-strict-checking/" itemprop="url">错误：RSA host key for 10.110.30.73 has changed and you have requested strict checking.（已解决）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-12T19:14:24+08:00">
                2018-11-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天在执行<code>git pull</code>后,报错：</p>
<blockquote>
<p>先执行了 <code>git remote set-url origin ssh://git@ip:22/~/git/www.baidu.com/</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span><br><span class="line">Someone could be eavesdropping on you right now (man-in-the-middle attack)!</span><br><span class="line">It is also possible that a host key has just been changed.</span><br><span class="line">The fingerprint <span class="keyword">for</span> the RSA key sent by the remote host is</span><br><span class="line">SHA256:buhkV/c/OVY1lOGF+pKRo/hpDhw7YZ+Yj9o+Qx8bib4.</span><br><span class="line">Please contact your system administrator.</span><br><span class="line">Add correct host key <span class="keyword">in</span> /c/Users/mayunfeng/.ssh/known_hosts to get rid of this message.</span><br><span class="line">Offending RSA key <span class="keyword">in</span> /c/Users/mayunfeng/.ssh/known_hosts:3</span><br><span class="line">RSA host key <span class="keyword">for</span> 10.110.30.73 has changed and you have requested strict checking.</span><br><span class="line">Host key verification failed.</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure>
<p>因为重装后，本地机和服务器内部ssh对不上导致错误，因此，只需要删除本地机ssh缓存信息，即可恢复<br>在本地机输入一下命令行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -R [服务器ip address]</span><br></pre></td></tr></table></figure>
<p>得到以下结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -R 10.110.30.73</span><br><span class="line"><span class="comment"># Host 10.110.30.73 found: line 3</span></span><br><span class="line">/c/Users/mayunfeng/.ssh/known_hosts updated.</span><br><span class="line">Original contents retained as /c/Users/mayunfeng/.ssh/known_hosts.old</span><br></pre></td></tr></table></figure>
<p>再次执行 <code>git pull</code> 问题得到解决！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="马运锋">
            
              <p class="site-author-name" itemprop="name">马运锋</p>
              <p class="site-description motion-element" itemprop="description">欢迎来到马运锋的博客</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">33</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/mayunf" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yunfeng0614@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">马运锋</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>
<div class="BbeiAn-info"">
  豫ICP备 -
  <a href="http://www.miitbeian.gov.cn/">18043078号-1</a>
  
</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
